import{_ as B}from"./EIEHQPYc.js";import{_ as x,r,j as $,c as u,o as a,a as t,t as C,k as d,b as y,w as g,d as T,n as V,s as w,T as z,l as I,v as j,m as q,F,q as L,z as S}from"./CvijNlaF.js";import{u as N}from"./pkEeAuE0.js";const U=()=>({pluralize:(n,m,_,o)=>{if(Number(n)===0)return"";n=Math.abs(n)%100;const s=n%10;return n>10&&n<20?o:s>1&&s<5?_:s===1?m:o}}),A={class:"collection-card"},E={class:"collection-info"},G={class:"collection-actions"},O={__name:"CollectionCard",props:{collection:{type:Object,required:!0}},emits:["delete"],setup(v){const n=v,{getSongsCountInCollection:m}=N(),{pluralize:_}=U(),o=r(0);return $(async()=>{o.value=await m(n.collection.id)}),(s,l)=>{const f=B;return a(),u("div",A,[t("div",E,[t("h3",null,C(v.collection.name),1),t("p",null,C(o.value)+" "+C(d(_)(o.value,"песня","песни","песен")),1)]),t("div",G,[y(f,{to:`/collections/${v.collection.id}`,class:"view-button"},{default:g(()=>l[1]||(l[1]=[T(" Открыть ")])),_:1},8,["to"]),t("button",{class:"delete-button",onClick:l[0]||(l[0]=V(i=>s.$emit("delete",v.collection),["stop"]))}," Удалить ")])])}}},R=x(O,[["__scopeId","data-v-dfdbb5eb"]]),H={key:0},J={key:1,class:"collections-grid"},K={key:2,class:"modal"},P={class:"modal-content"},Q={class:"modal-actions"},W={key:3,class:"modal"},X={class:"modal-content"},Y={class:"modal-actions"},Z={__name:"index",setup(v){const{getCollections:n,createCollection:m,deleteCollection:_}=N(),o=r([]),s=r(!0),l=r(!1),f=r(!1),i=r(""),h=r(null);$(async()=>{o.value=await n(),s.value=!1});const D=async()=>{if(!i.value.trim()){alert("Введите название подборки");return}await m(i.value.trim()),i.value="",l.value=!1,o.value=await n()},k=async p=>{if(confirm(`Вы уверены, что хотите удалить подборку "${p.name}"?`))try{await _(p.id),o.value=o.value.filter(e=>e.id!==p.id)}catch(e){console.error("Ошибка удаления:",e),alert("Не удалось удалить подборку")}};return(p,e)=>{var b;const M=R;return a(),u("div",null,[e[6]||(e[6]=t("h1",null,"Мои подборки",-1)),t("button",{onClick:e[0]||(e[0]=c=>l.value=!0)},"Создать новую подборку"),d(s)?(a(),u("div",H,"Загрузка...")):(a(),u("div",J,[y(z,{name:"fade"},{default:g(()=>[(a(!0),u(F,null,L(d(o),c=>(a(),S(M,{key:c.id,collection:c,onDelete:k},null,8,["collection"]))),128))]),_:1})])),d(l)?(a(),u("div",K,[t("div",P,[e[4]||(e[4]=t("h3",null,"Новая подборка",-1)),I(t("input",{"onUpdate:modelValue":e[1]||(e[1]=c=>q(i)?i.value=c:null),placeholder:"Название подборки"},null,512),[[j,d(i)]]),t("div",Q,[t("button",{onClick:D},"Создать"),t("button",{onClick:e[2]||(e[2]=c=>l.value=!1)},"Отмена")])])])):w("",!0),d(f)?(a(),u("div",W,[t("div",X,[t("h3",null,'Удалить подборку "'+C((b=d(h))==null?void 0:b.name)+'"?',1),e[5]||(e[5]=t("p",null,"Все песни в этой подборке будут удалены из нее.",-1)),t("div",Y,[t("button",{onClick:k},"Удалить"),t("button",{onClick:e[3]||(e[3]=c=>f.value=!1)},"Отмена")])])])):w("",!0)])}}},nt=x(Z,[["__scopeId","data-v-7eca7049"]]);export{nt as default};
