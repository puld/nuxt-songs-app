import{u as S}from"./C-IOYsPb.js";import{c as g,o as p,a as s,p as i,k as o,_ as y,r as m,b as C,F as w,q as T,t as d,s as $}from"./BQaydpjH.js";import{u as x}from"./Dqy43P0_.js";import{u as B}from"./B4oYvPNv.js";const F={class:"theme-toggle"},N={__name:"ThemeToggle",setup(v){const n=S();return(r,e)=>(p(),g("div",F,[s("button",{class:i({active:o(n).value==="light"}),onClick:e[0]||(e[0]=l=>o(n).preference="light")}," Светлая ",2),s("button",{class:i({active:o(n).value==="dark"}),onClick:e[1]||(e[1]=l=>o(n).preference="dark")}," Темная ",2),s("button",{class:i({active:o(n).value==="system"}),onClick:e[2]||(e[2]=l=>o(n).preference="system")}," Как в системе ",2)]))}},j=()=>{const{addSongs:v}=B();return{fetchSongs:async r=>{try{const e=await fetch("/assets/songs.json");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const l=e.headers.get("content-type");if(!l||!l.includes("application/json"))throw new TypeError("Получен не JSON-ответ");const f=await e.json();return await v(f.songs),!0}catch(e){return console.error("Ошибка загрузки песен:",e),!1}}}},z={class:"settings"},E={class:"setting-section"},M={class:"setting-section"},V={class:"font-size-controls"},D=["onClick"],I={class:"setting-section"},q={class:"toggle-switch"},H=["checked"],J={class:"toggle-label"},L={class:"setting-section"},O=["disabled"],P={__name:"settings",setup(v){const{fetchSongs:n}=j(),r=m(!1),e=m(""),l=m(!1),f=async()=>{r.value=!0,e.value="";try{const a=await n();l.value=a,e.value=a?"База данных успешно обновлена":"Ошибка при обновлении базы данных"}catch(a){l.value=!1,e.value="Ошибка: "+a.message}finally{r.value=!1}},c=x(),h=[{value:"small",label:"Меньше"},{value:"medium",label:"Стандартный"},{value:"large",label:"Больше"}],_=a=>{c.setFontSize(a)},k=a=>{c.setShowChords(a.target.checked)};return(a,t)=>{const b=N;return p(),g("div",z,[t[6]||(t[6]=s("h1",null,"Настройки",-1)),s("div",E,[t[0]||(t[0]=s("h2",null,"Тема приложения",-1)),C(b)]),s("div",M,[t[1]||(t[1]=s("h2",null,"Размер шрифта:",-1)),s("div",V,[(p(),g(w,null,T(h,u=>s("button",{key:u.value,onClick:A=>_(u.value),class:i({active:o(c).fontSize===u.value})},d(u.label),11,D)),64))])]),s("div",I,[t[3]||(t[3]=s("h2",null,"Отображение аккордов:",-1)),s("label",q,[s("input",{type:"checkbox",checked:o(c).showChords,onChange:k},null,40,H),t[2]||(t[2]=s("span",{class:"slider"},null,-1)),s("span",J,d(o(c).showChords?"Вкл":"Выкл"),1)])]),s("div",L,[t[4]||(t[4]=s("h2",null,"Обновление базы данных",-1)),t[5]||(t[5]=s("p",null,"Принудительно обновить базу данных текстов песен",-1)),s("button",{onClick:f,disabled:o(r)},d(o(r)?"Обновление...":"Обновить"),9,O),o(e)?(p(),g("p",{key:0,class:i(o(l)?"success":"error")},d(o(e)),3)):$("",!0)])])}}},U=y(P,[["__scopeId","data-v-fc424a06"]]);export{U as default};
