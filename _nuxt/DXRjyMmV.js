import{_ as x}from"./lGk3GuW0.js";import{_ as C,y as N,r as m,j as h,c as o,k as r,a,b as _,w as p,t as i,F as w,q as B,o as n,d as u}from"./Cf4CmSYL.js";import{u as I}from"./CT_b28HC.js";const S={key:0},F={key:1},V={key:2},D={key:0,class:"empty"},L={key:1,class:"songs-list"},$=["onClick"],j={__name:"[id]",setup(q){const v=N(),{getSongsInCollection:y,getCollection:k,removeSongFromCollection:b}=I(),c=m(null),s=m([]),f=m(!0),g=async t=>{if(confirm("Удалить эту песню из подборки?"))try{await b(Number(v.params.id),Number(t)),s.value=s.value.filter(e=>e.number!==t)}catch(e){console.error("Ошибка удаления:",e),alert("Не удалось удалить песню")}};return h(async()=>{try{const t=Number(v.params.id);c.value=await k(t),s.value=await y(t)}catch(t){console.error("Ошибка загрузки:",t)}finally{f.value=!1}}),(t,e)=>{const d=x;return n(),o("div",null,[r(f)?(n(),o("div",S,"Загрузка...")):r(c)?(n(),o("div",V,[a("h2",null,"Подборка: "+i(r(c).name),1),a("p",null,"Количество песен: "+i(r(s).length),1),r(s).length===0?(n(),o("div",D,[e[3]||(e[3]=a("p",null,"В этой подборке пока нет песен",-1)),_(d,{to:"/"},{default:p(()=>e[2]||(e[2]=[u("Добавить песни")])),_:1})])):(n(),o("div",L,[(n(!0),o(w,null,B(r(s),l=>(n(),o("div",{key:l.number,class:"song-item"},[u(i(l.number)+". ",1),_(d,{to:`/song/${l.number}`},{default:p(()=>[u(i(l.title),1)]),_:2},1032,["to"]),a("button",{onClick:E=>g(l.number),class:"remove-btn"}," Удалить из подборки ",8,$)]))),128))]))])):(n(),o("div",F,[e[1]||(e[1]=a("p",null,"Подборка не найдена",-1)),_(d,{to:"/collections"},{default:p(()=>e[0]||(e[0]=[u("Назад к списку")])),_:1})]))])}}},z=C(j,[["__scopeId","data-v-3650b45e"]]);export{z as default};
